const { deterministicPartitionKey } = require("./dpk");

const falsy = [
	{
		key: null,
		value: '0'
	},{
		key: undefined,
		value: '0'
	},{
		key: NaN,
		value: '0'
	},{
		key: 1/'a', // Also NaN
		value: '0'
	},{
		key: false,
		value: '0'
	},{
		key: '',
		value: '0'
	}, {
		key: {partitionKey: null},
		value: '58540d4d440df8c6c6da0d79cfce715bc92953c6cde8be9f749790004ef2d5a7322d0fd5170eac9a37d57ee0cc975cfca068a60b01622529d9e0fd657f71b8e2'
	}, {
		key: {partitionKey: false},
		value: '51a5f43b933ce152103a4789a17f1cf958e0b5e1c793082db6a6c74dd3f04c69ad8f558e28cf7c3eac61af4e484741f095129e815c4de4fdd30e3cd6c4e3c00f'
	}, {
		key: {partitionKey: undefined},
		value: 'c1802e6b9670927ebfddb7f67b3824642237361f07db35526c42c555ffd2dbe74156c366e1550ef8c0508a6cc796409a7194a59bba4d300a6182b483d315a862'
	}
]

const functionalPrompts = [
	{
		key: 'Test Value',
		value: 'af5e0a2f6204b35cc9742b34778630a29b18f741805df19a6f1150f502cf909cca559ab17c876abc75a92b999111050693beffbe4c4f37c293c61e5fe95401ec'
	},{
		key: 'Test ' + 'Value', 
		value: 'af5e0a2f6204b35cc9742b34778630a29b18f741805df19a6f1150f502cf909cca559ab17c876abc75a92b999111050693beffbe4c4f37c293c61e5fe95401ec'
	}, {
		key: 'Test' + 1234,
		value: 'd9db88a0ac613f9fbe449392f3d4c3af740fa16e2243abed14552fdbaf422cac2aa0dfeb43e3f2042631600338f7dbaafa71087bfa66f371632a1f63a41d1484'
	}, {
		key: 'd9db88a0ac613f9fbe449392f3d4c3af740fa16e2243abed14552fdbaf422cac2aa0dfeb43e3f2042631600338f7dbaafa71087bfa66f371632a1f63a41d1484',
		value: '18eaddaa7aa0ab74fc52c880d9563b6593a1f437e6d2702f9c064bc73c68145d219afb67ba975d19a06da3df6775806b995eb02115aa80118495a7e611032058'
	}, {
		key: '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
		value: 'afe0487f8ad614e7040117f3b65715f1a0e75e0de6349cd536823c6cb27996d9acd41ff40709ffd15b682235ab60d4d788aaf465e26f5146696b78430ceaa840'
	}, {
		key: 'false',
		value: '69790e8a53bf8b621373667e385889f6df93f88441434641071b054c8f492dee0a0efc070bfbaabe71cde38cd554d641e2c218c7fd7fd2eb4afe1024235461ee'
	}, {
		key: 1,
		value: 'ca2c70bc13298c5109ee0cb342d014906e6365249005fd4beee6f01aee44edb531231e98b50bf6810de6cf687882b09320fdd5f6375d1f2debd966fbf8d03efa'
	}, {
		key: true,
		value: 'ff2c82ed266dc30b1afe862bee32cf996b213513bc6b3e242ff605ddd9d5bbd1e7eebf6dde586b8700125cb7b95d35aec2f4e750d092cd359b202e3d2be41e1a'
	}, {
		key: 'string with 255 characters: ___________________________________________________________________________________________________________________________________________________________________________________________________________________________________',
		value: 'c6433840194a5c9bf8d347f0816ef4b3b06c701fe81c1de19b18196eee63df84c0f31c4f3e8913987be07385748d8a59cd606dfd47d9ebb4f856878668015411'
	}, {
		key: 'string with 256 characters: ____________________________________________________________________________________________________________________________________________________________________________________________________________________________________',
		value: '059378c12da86cfd497dcc8e087a78b202e30ce3a4a0fbd7916d999109d1919efba7eb77c103828b51e2b03819c269b2a47c67092d3055b4e46b9abca5d0c012'
	}, {
		key: 'string with 257 characters: _____________________________________________________________________________________________________________________________________________________________________________________________________________________________________',
		value: 'c1f751a013c29c26b93545abcad74016a03393e116688d10b5b7c420ae6944448f0aee7cd1d85480ef1089444d7fb6ae2a38b6f6a9e140ca38f79467b8049c84'
	}, {
		key: '_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________',
		value: '09797d4cfeacb07fabce997bb344ed60148d0f09328635f4d1f498eb537471f897cbc77c9490edfbba2aeaf33f9d859924d94dfb681cb958a37bd6c13beb6507'
	}, {
		key: '________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________',
		value: 'f334c454658b61643ef70edc3e39c3b06dfb76f61c1658c25534a701f96ea70e2dee772012fecdb03967302e8a91550109b9bcbfee7e1bddf1909e4469db79b4'
	}, {
		key: '_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________',
		value: '2f9ffa25b4acce8edf6c92a0f5e7811cc8635ba9ab4ae570d41e9bed9a2fce3c4600f02b6ed4ba29f21f8d0064bbf90ecad7309659badbb31b63fbbfd2316934'
	}, {
		key: {partitionKey: 'c1802e6b9670927ebfddb7f67b3824642237361f07db35526c42c555ffd2dbe74156c366e1550ef8c0508a6cc796409a7194a59bba4d300a6182b483d315a862'},
		value: 'c1802e6b9670927ebfddb7f67b3824642237361f07db35526c42c555ffd2dbe74156c366e1550ef8c0508a6cc796409a7194a59bba4d300a6182b483d315a862'
	}, {
		key: {partitionKey: '256_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________'},
		value: '256_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________'
	}, {
		key: {partitionKey: '257______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________'},
		value: 'a9dc963959dcf959de0bedd404f37e3c47eb53183ab3f82cc385ebee74830bf7324855842bcecd22075ff5d1e2920d5afa88ada7a0912d71d3172f16457d96a9'
	}, {
		key: {partitionKey: 'Any value here should work, as long as the character count is below 256.'},
		value: 'Any value here should work, as long as the character count is below 256.'
	}
]


describe("Falsy values", () => {
	falsy.forEach(({key, value}) => {
		it(`Returns '${value}' when called with ${JSON.stringify(key)}`, () => {
			expect(deterministicPartitionKey(key)).toEqual(value)
		})
	})
})

describe("Alpha numeric values", () => {
	functionalPrompts.forEach(({key, value}) => {
		it(`Returns '${value}' when called with ${JSON.stringify(key)}`, () => {
			expect(deterministicPartitionKey(key)).toEqual(value)
		})
	})
})



